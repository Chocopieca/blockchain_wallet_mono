


import{_ as v,u as E,r as a,o as s,b as m,w as c,e as o,B as h,D as g,g as n,f as k,a as y,t as B,T as V}from"./index-aaecdc93.js";import{u as _}from"./useEtherJsStore-51f2c7eb.js";import{u as b}from"./useValidateModule-1f635df4.js";import"./useBtcStore-b1c51fda.js";import"./useErc20TokenStore-157d8b1b.js";const C=E({name:"SendEtherForm",data(){return{isLoading:!1,transaction:"",form:{receiver:"",amount:""},errors:this.validateModule.errorHandlerModule.value}},setup(){const e=_(),t=b();async function i(d){return await e.onSendEth(d)}async function l(){return await e.getUserData()}return{useEtherJs:e,validateModule:t,onSendEth:i,getUserData:l}},methods:{async submitForm(){try{const e={receiver:this.form.receiver,amount:this.form.amount};if(!this.validate(e.receiver,e.amount))return;this.isLoading=!0,this.transaction=await this.onSendEth(e).then(t=>(alert(t.hash),t.hash)),await this.getUserData(),this.form={receiver:"",amount:""}}catch(e){console.log("SubmitForm error: ",e)}finally{this.isLoading=!1}},validate(e,t){return this.validateModule.validateForm([{key:"address",value:e,method:"isNotEmpty"},{key:"amount",value:t,method:"isNotEmpty"},{key:"address",value:e,method:"isEthAddressValid"},{key:"amount",value:t,method:"isValueOverZero"},{key:"amount",value:t,method:"isAmountNoOverEtherBalance"}])}},computed:{getEtherscanLink(){return this.transaction?`https://sepolia.etherscan.io/tx/${this.transaction}`:null}}}),S={class:"flex-center mb-5"},L={key:1,class:"scan-link main-black-text"},N=["href"];function F(e,t,i,l,d,$){const p=a("BaseLoading"),u=a("BaseInput"),f=a("BaseButton");return s(),m(V,{mode:"out-in"},{default:c(()=>[o("div",null,[e.isLoading?(s(),m(p,{key:0})):h("",!0),o("form",{class:g(e.transaction?"mb-2":"")},[o("div",S,[n(u,{modelValue:e.form.receiver,"onUpdate:modelValue":t[0]||(t[0]=r=>e.form.receiver=r),label:"Receiver",class:"mr-2",error:e.errors.getError("address"),onClearError:t[1]||(t[1]=r=>e.errors.clearError("address"))},null,8,["modelValue","error"]),n(u,{modelValue:e.form.amount,"onUpdate:modelValue":t[2]||(t[2]=r=>e.form.amount=r),label:"Amount",class:"ml-2",error:e.errors.getError("amount"),onClearError:t[3]||(t[3]=r=>e.errors.clearError("amount"))},null,8,["modelValue","error"])]),n(f,{buttonColor:"#E95420",onClick:e.submitForm},{default:c(()=>[k(" SEND ")]),_:1},8,["onClick"])],2),e.getEtherscanLink?(s(),y("div",L,[o("a",{href:e.getEtherscanLink,target:"_blank"}," Etherscan: "+B(e.transaction),9,N)])):h("",!0)])]),_:1})}const I=v(C,[["render",F],["__scopeId","data-v-e00d5084"]]);export{I as default};
